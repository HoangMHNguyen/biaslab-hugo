<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User guide ¬∑ ForneyLab.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><nav class="toc"><a href="../"><img class="logo" src="../assets/logo.png" alt="ForneyLab.jl logo"/></a><h1>ForneyLab.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../getting-started/">Getting started</a></li><li class="current"><a class="toctext" href>User guide</a><ul class="internal"><li><a class="toctext" href="#Specifying-a-model-1">Specifying a model</a></li><li><a class="toctext" href="#Generating-an-algorithm-1">Generating an algorithm</a></li><li><a class="toctext" href="#Executing-an-algorithm-1">Executing an algorithm</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../library/user-api/">User API</a></li><li><a class="toctext" href="../library/developer-api/">Developer API</a></li></ul></li><li><a class="toctext" href="../contributing/">Contributing</a></li><li><a class="toctext" href="../internals/">Internals</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href>User guide</a></li></ul><a class="edit-page" href="https://github.com/biaslab/ForneyLab.jl/blob/master/docs/src/user-guide.md"><span class="fa">ÔÇõ</span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>User guide</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="User-guide-1" href="#User-guide-1">User guide</a></h1><p>This user guide outlines the usage of ForneyLab for solving inference problems. The main content is divided in three parts:</p><ul><li><a href="#Specifying-a-model-1">Specifying a model</a></li><li><a href="#Generating-an-algorithm-1">Generating an algorithm</a></li><li><a href="#Executing-an-algorithm-1">Executing an algorithm</a></li></ul><p>For installation instructions see the <a href="../getting-started/#Getting-started-1">Getting started</a> page. To import ForneyLab into the active Julia session run  </p><pre><code class="language-julia">using ForneyLab</code></pre><h2><a class="nav-anchor" id="Specifying-a-model-1" href="#Specifying-a-model-1">Specifying a model</a></h2><p>Probabilistic models incorporate the element of randomness to describe an event or phenomenon. They do this by using random variables and probability distributions. These models can be represented diagrammatically using probabilistic graphical models (PGMs). A factor graph is a type of PGM that is well suited to cast inference tasks in terms of graphical manipulations.</p><h3><a class="nav-anchor" id="Creating-a-new-factor-graph-1" href="#Creating-a-new-factor-graph-1">Creating a new factor graph</a></h3><p>Factor graphs are represented by the <code>FactorGraph</code> composite type (struct). To instantiate a new (empty) factor graph we use its constructor function that takes no arguments</p><pre><code class="language-julia">g = FactorGraph()
;</code></pre><p>ForneyLab keeps track of an <em>active</em> factor graph at all times. Future operations on the graph, such as adding variables or nodes, affect the active graph. The call to <code>FactorGraph()</code> creates a new instance of a factor graph and registers it as the active graph.</p><p>To get the active graph run</p><pre><code class="language-julia">fg = currentGraph()
;</code></pre><p>To set the active graph run</p><pre><code class="language-julia">setCurrentGraph(g)
;</code></pre><h3><a class="nav-anchor" id="Adding-random-variables-(edges)-1" href="#Adding-random-variables-(edges)-1">Adding random variables (edges)</a></h3><p>Random variables are represented as edges on Forney-style factor graphs. You can add a random variable to the active factor graph by instantiating the <code>Variable</code> composite type. The constructor function takes an <code>id</code> of type <code>Symbol</code> as argument. For example, running</p><pre><code class="language-julia">x = Variable(id=:x)
;</code></pre><p>associates the variable <code>x</code> to an edge of the active factor graph.</p><p>Alternatively, the <code>@RV</code> macro can be used for the same purpose in a more compact form. Executing the following line has the same effect as the previous one.</p><pre><code class="language-julia">@RV x
;</code></pre><p>By default, the <code>@RV</code> macro uses the variable&#39;s name to create a Julia <code>Symbol</code> that is assigned to the <code>id</code> field of the <code>Variable</code> object (<code>:x</code> in this example). However, if this id value has already been assigned to a variable in the factor graph, then ForneyLab will create a default id of the form <code>:variable_x</code>, where <code>x</code> is a number that increments. In case you want to provide a custom <code>id</code>, the <code>@RV</code> macro accepts an optional keyword argument between square brackets that allows this. For example,</p><pre><code class="language-julia">@RV [id=:my_id] x
;</code></pre><p>adds the variable <code>x</code> to the active graph and assigns the <code>:my_id</code> symbol to its <code>id</code> field. Later we will see that this is useful once we start visualizing the factor graph.</p><h3><a class="nav-anchor" id="Adding-factor-nodes-1" href="#Adding-factor-nodes-1">Adding factor nodes</a></h3><p>Factor nodes are used to define the relationship between different random variables. They assign probability distributions to a random variable as a function of other variables. See <a href="../library/user-api/#Factor-nodes-1">Factor nodes</a> for a complete list of the available factor nodes in ForneyLab.</p><p>We can assign a probability distribution to a random variable using the <code>~</code> operator together with the <code>@RV</code> macro. For example, to create a Gaussian distributed random variable <code>y</code>, where its mean and variance are controlled by the random variables <code>m</code> and <code>v</code> respectively, we could run</p><pre><code class="language-julia">@RV m
@RV v
@RV y ~ GaussianMeanVariance(m, v)
;</code></pre><h3><a class="nav-anchor" id="Visualizing-a-factor-graph-1" href="#Visualizing-a-factor-graph-1">Visualizing a factor graph</a></h3><p>Factor graphs can be visualized using the <code>draw</code> function. It takes a <code>FactorGraph</code> object as argument. Let&#39;s visualize the factor graph that we defined in the previous section.</p><pre><code class="language-julia">ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="400pt" height="178pt"
 viewBox="0.00 0.00 400.00 178.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 174)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-174 396,-174 396,4 -4,4"/>
<!-- 7753114169149879543 -->
<g id="node1" class="node">
<title>7753114169149879543</title>
<polygon fill="none" stroke="#000000" points="248.9605,-72 143.0395,-72 143.0395,0 248.9605,0 248.9605,-72"/>
<text text-anchor="middle" x="196" y="-38.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="196" y="-28.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 14046999291083782132 -->
<g id="node2" class="node">
<title>14046999291083782132</title>
</g>
<!-- 14046999291083782132&#45;&#45;7753114169149879543 -->
<g id="edge1" class="edge">
<title>14046999291083782132&#45;&#45;7753114169149879543</title>
<path fill="none" stroke="#000000" d="M54.1528,-125.8086C78.039,-110.6854 113.5008,-88.2332 142.991,-69.5619"/>
<text text-anchor="start" x="107" y="-91.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="128.7684" y="-71.1619" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 7223581995972104932 -->
<g id="node3" class="node">
<title>7223581995972104932</title>
</g>
<!-- 7223581995972104932&#45;&#45;7753114169149879543 -->
<g id="edge2" class="edge">
<title>7223581995972104932&#45;&#45;7753114169149879543</title>
<path fill="none" stroke="#000000" d="M196,-115.9994C196,-102.7507 196,-86.6013 196,-72.2906"/>
<text text-anchor="start" x="196" y="-91.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="177.7773" y="-73.8906" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 165548248838222609792 -->
<g id="node4" class="node">
<title>165548248838222609792</title>
</g>
<!-- 165548248838222609792&#45;&#45;7753114169149879543 -->
<g id="edge3" class="edge">
<title>165548248838222609792&#45;&#45;7753114169149879543</title>
<path fill="none" stroke="#000000" d="M337.8472,-125.8086C313.961,-110.6854 278.4992,-88.2332 249.009,-69.5619"/>
<text text-anchor="start" x="290" y="-91.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">v</text>
<text text-anchor="start" x="249.009" y="-71.1619" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
</g>
</svg>
<p>Edges that are not connected to any factor node are not drawn.</p><h3><a class="nav-anchor" id="Clamping-1" href="#Clamping-1">Clamping</a></h3><p>Suppose we know that the variance of the random variable <code>y</code>, of the previous model, is fixed to a certain value. ForneyLab provides a special factor node to impose this kind of constraint called a <code>Clamp</code>. Clamp factor nodes can be implicitly defined by using literals like in the following example</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV m
@RV y ~ GaussianMeanVariance(m, 1.0)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="231pt" height="276pt"
 viewBox="0.00 0.00 231.00 276.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 272)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-272 227,-272 227,4 -4,4"/>
<!-- 2855628411211538398 -->
<g id="node1" class="node">
<title>2855628411211538398</title>
<polygon fill="#d3d3d3" stroke="#000000" points="138,-54 84,-54 84,0 138,0 138,-54"/>
<text text-anchor="middle" x="111" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 14801365013788989583 -->
<g id="node2" class="node">
<title>14801365013788989583</title>
<polygon fill="none" stroke="#000000" points="163.9605,-170 58.0395,-170 58.0395,-98 163.9605,-98 163.9605,-170"/>
<text text-anchor="middle" x="111" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="111" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 14801365013788989583&#45;&#45;2855628411211538398 -->
<g id="edge1" class="edge">
<title>14801365013788989583&#45;&#45;2855628411211538398</title>
<path fill="none" stroke="#000000" d="M111,-97.7747C111,-83.4665 111,-67.3116 111,-54.0525"/>
<text text-anchor="start" x="111" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="92.7773" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="99" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 39755744128710538502 -->
<g id="node3" class="node">
<title>39755744128710538502</title>
</g>
<!-- 39755744128710538502&#45;&#45;14801365013788989583 -->
<g id="edge2" class="edge">
<title>39755744128710538502&#45;&#45;14801365013788989583</title>
<path fill="none" stroke="#000000" d="M35.4918,-213.8663C38.9225,-205.1563 43.413,-195.7626 49,-188 53.5028,-181.7439 58.8646,-175.7244 64.5228,-170.12"/>
<text text-anchor="start" x="49" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="46.3001" y="-171.72" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 104030458861776810812 -->
<g id="node4" class="node">
<title>104030458861776810812</title>
</g>
<!-- 104030458861776810812&#45;&#45;14801365013788989583 -->
<g id="edge3" class="edge">
<title>104030458861776810812&#45;&#45;14801365013788989583</title>
<path fill="none" stroke="#000000" d="M174.5509,-213.9994C164.0262,-200.7507 151.1973,-184.6013 139.829,-170.2906"/>
<text text-anchor="start" x="158" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="125.6063" y="-171.8906" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
</g>
</svg>
<p>Here, the literal <code>1.0</code> that is passed as the second argument to <code>GaussianMeanVariance</code> function creates a clamp node implicitly. Clamp factor nodes are visualized with a gray background.</p><p>Alternatively, if you want to assign a custom <code>id</code> to a <code>Clamp</code> factor node, then you have to instantiate them explicitly using its constructor function, i.e.</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV m
@RV v ~ Clamp(1.0)
@RV y ~ GaussianMeanVariance(m, v)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="231pt" height="276pt"
 viewBox="0.00 0.00 231.00 276.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 272)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-272 227,-272 227,4 -4,4"/>
<!-- 16038781530829966323 -->
<g id="node1" class="node">
<title>16038781530829966323</title>
<polygon fill="none" stroke="#000000" points="163.9605,-170 58.0395,-170 58.0395,-98 163.9605,-98 163.9605,-170"/>
<text text-anchor="middle" x="111" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="111" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 10365017028935221715 -->
<g id="node2" class="node">
<title>10365017028935221715</title>
<polygon fill="#d3d3d3" stroke="#000000" points="138,-54 84,-54 84,0 138,0 138,-54"/>
<text text-anchor="middle" x="111" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 16038781530829966323&#45;&#45;10365017028935221715 -->
<g id="edge2" class="edge">
<title>16038781530829966323&#45;&#45;10365017028935221715</title>
<path fill="none" stroke="#000000" d="M111,-97.7747C111,-83.4665 111,-67.3116 111,-54.0525"/>
<text text-anchor="start" x="111" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">v</text>
<text text-anchor="start" x="92.7773" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="99" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 159538205729475052462 -->
<g id="node3" class="node">
<title>159538205729475052462</title>
</g>
<!-- 159538205729475052462&#45;&#45;16038781530829966323 -->
<g id="edge1" class="edge">
<title>159538205729475052462&#45;&#45;16038781530829966323</title>
<path fill="none" stroke="#000000" d="M35.4918,-213.8663C38.9225,-205.1563 43.413,-195.7626 49,-188 53.5028,-181.7439 58.8646,-175.7244 64.5228,-170.12"/>
<text text-anchor="start" x="49" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="46.3001" y="-171.72" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 151636987693968102542 -->
<g id="node4" class="node">
<title>151636987693968102542</title>
</g>
<!-- 151636987693968102542&#45;&#45;16038781530829966323 -->
<g id="edge3" class="edge">
<title>151636987693968102542&#45;&#45;16038781530829966323</title>
<path fill="none" stroke="#000000" d="M174.5509,-213.9994C164.0262,-200.7507 151.1973,-184.6013 139.829,-170.2906"/>
<text text-anchor="start" x="158" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="125.6063" y="-171.8906" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
</g>
</svg>
<h3><a class="nav-anchor" id="Placeholders-1" href="#Placeholders-1">Placeholders</a></h3><p>Placeholders are a kind of <code>Clamp</code> factor nodes that act as entry points for data. They associate a given random variable with a buffer through which data is fed at a later point. This buffer has an <code>id</code>, a dimensionality and a data type. Placeholders are created with the <code>placeholder</code> function. Suppose that we want to feed an array of one-dimensional floating-point data to the <code>y</code> random variable of the previous model. We would then need to define <code>y</code> as a placeholder as follows.</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV m
@RV v ~ Clamp(1.0)
@RV y ~ GaussianMeanVariance(m, v)
placeholder(y, :y)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="243pt" height="276pt"
 viewBox="0.00 0.00 243.49 276.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 272)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-272 239.4883,-272 239.4883,4 -4,4"/>
<!-- 12738189477694249680 -->
<g id="node1" class="node">
<title>12738189477694249680</title>
<polygon fill="#d3d3d3" stroke="#000000" points="66.9648,-268 .0117,-268 .0117,-214 66.9648,-214 66.9648,-268"/>
<text text-anchor="middle" x="33.4883" y="-238.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y</text>
</g>
<!-- 1446013683501167337 -->
<g id="node3" class="node">
<title>1446013683501167337</title>
<polygon fill="none" stroke="#000000" points="173.4487,-170 67.5278,-170 67.5278,-98 173.4487,-98 173.4487,-170"/>
<text text-anchor="middle" x="120.4883" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="120.4883" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 12738189477694249680&#45;&#45;1446013683501167337 -->
<g id="edge3" class="edge">
<title>12738189477694249680&#45;&#45;1446013683501167337</title>
<path fill="none" stroke="#000000" d="M45.6103,-213.7618C50.0297,-205.1388 55.4439,-195.8232 61.4883,-188 66.2425,-181.8467 71.74,-175.8015 77.428,-170.1115"/>
<text text-anchor="start" x="61.4883" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="59.2054" y="-171.7115" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="27.3876" y="-207.3618" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 11500053031813250037 -->
<g id="node2" class="node">
<title>11500053031813250037</title>
<polygon fill="#d3d3d3" stroke="#000000" points="147.4883,-54 93.4883,-54 93.4883,0 147.4883,0 147.4883,-54"/>
<text text-anchor="middle" x="120.4883" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 1446013683501167337&#45;&#45;11500053031813250037 -->
<g id="edge2" class="edge">
<title>1446013683501167337&#45;&#45;11500053031813250037</title>
<path fill="none" stroke="#000000" d="M120.4883,-97.7747C120.4883,-83.4665 120.4883,-67.3116 120.4883,-54.0525"/>
<text text-anchor="start" x="120.4883" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">v</text>
<text text-anchor="start" x="102.2656" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="108.4883" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 125220274234906820152 -->
<g id="node4" class="node">
<title>125220274234906820152</title>
</g>
<!-- 125220274234906820152&#45;&#45;1446013683501167337 -->
<g id="edge1" class="edge">
<title>125220274234906820152&#45;&#45;1446013683501167337</title>
<path fill="none" stroke="#000000" d="M186.2822,-213.9994C175.386,-200.7507 162.1043,-184.6013 150.3348,-170.2906"/>
<text text-anchor="start" x="169.4883" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="136.1121" y="-171.8906" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
</g>
</svg>
<p>Placeholders default to one-dimensional floating-point data. In case we want to override this with, for example, 3-dimensional integer data, we would need to specify the <code>dims</code> and <code>datatpye</code> parameters of the <code>placeholder</code> function as follows</p><pre><code class="language-julia">placeholder(y, :y, dims=(3,), datatype=Int)</code></pre><p>In the previous example, we first created the random variable <code>y</code> and then marked it as a placeholder. There is, however, a shorthand version to perform these two steps in one. The syntax consists of calling a <code>placeholder</code> method that takes an id <code>Symbol</code> as argument and returns the new random variable. Here is an example:</p><pre><code class="language-julia">x = placeholder(:x)
;</code></pre><p>where <code>x</code> is now a random variable linked to a placeholder with id <code>:x</code>.</p><p>In section <a href="#Executing-an-algorithm-1">Executing an algorithm</a> we will see how the data is fed to the placeholders.</p><h3><a class="nav-anchor" id="Overloaded-operators-1" href="#Overloaded-operators-1">Overloaded operators</a></h3><p>ForneyLab supports the use of the <code>+</code>, <code>-</code> and <code>*</code> operators between random variables that have certain types of probability distributions. This is known as <em>operator overloading</em>. These operators are represented as deterministic factor nodes in ForneyLab. As an example, a two-component Gaussian mixture can be defined as follows  </p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV x ~ GaussianMeanVariance(0.0, 1.0)
@RV y ~ GaussianMeanVariance(2.0, 3.0)
@RV z = x + y
placeholder(z, :z)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="595pt" height="392pt"
 viewBox="0.00 0.00 595.00 392.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 388)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-388 591,-388 591,4 -4,4"/>
<!-- 4503503700111714986 -->
<g id="node1" class="node">
<title>4503503700111714986</title>
<polygon fill="#d3d3d3" stroke="#000000" points="54,-54 0,-54 0,0 54,0 54,-54"/>
<text text-anchor="middle" x="27" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_3</text>
</g>
<!-- 3159707208281223506 -->
<g id="node2" class="node">
<title>3159707208281223506</title>
<polygon fill="none" stroke="#000000" points="329,-286 257,-286 257,-214 329,-214 329,-286"/>
<text text-anchor="middle" x="293" y="-251.8" font-family="Times,serif" font-size="9.00" fill="#000000">+</text>
<text text-anchor="middle" x="293" y="-242.8" font-family="Times,serif" font-size="9.00" fill="#000000">addition_1</text>
</g>
<!-- 2415785398561310194 -->
<g id="node3" class="node">
<title>2415785398561310194</title>
<polygon fill="none" stroke="#000000" points="235.9605,-170 130.0395,-170 130.0395,-98 235.9605,-98 235.9605,-170"/>
<text text-anchor="middle" x="183" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="183" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_2</text>
</g>
<!-- 3159707208281223506&#45;&#45;2415785398561310194 -->
<g id="edge5" class="edge">
<title>3159707208281223506&#45;&#45;2415785398561310194</title>
<path fill="none" stroke="#000000" d="M256.9919,-216.1759C250.2447,-209.5869 243.3275,-202.6566 237,-196 229.2308,-187.8268 221.1143,-178.7937 213.6046,-170.2098"/>
<text text-anchor="start" x="237" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="195.3819" y="-171.8098" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="238.7692" y="-217.7759" font-family="Times,serif" font-size="8.00" fill="#000000">3 in2 </text>
</g>
<!-- 14219268703650706622 -->
<g id="node6" class="node">
<title>14219268703650706622</title>
<polygon fill="none" stroke="#000000" points="456.9605,-170 351.0395,-170 351.0395,-98 456.9605,-98 456.9605,-170"/>
<text text-anchor="middle" x="404" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="404" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 3159707208281223506&#45;&#45;14219268703650706622 -->
<g id="edge6" class="edge">
<title>3159707208281223506&#45;&#45;14219268703650706622</title>
<path fill="none" stroke="#000000" d="M327.5126,-213.9327C340.8773,-199.9661 356.1461,-184.0095 369.5087,-170.045"/>
<text text-anchor="start" x="352" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="351.2861" y="-171.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="309.29" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 in1 </text>
</g>
<!-- 2415785398561310194&#45;&#45;4503503700111714986 -->
<g id="edge1" class="edge">
<title>2415785398561310194&#45;&#45;4503503700111714986</title>
<path fill="none" stroke="#000000" d="M130.1855,-97.7747C104.7286,-80.3138 75.2621,-60.1029 54.3516,-45.7604"/>
<text text-anchor="start" x="101" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_3</text>
<text text-anchor="start" x="54.3516" y="-47.3604" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="115.9629" y="-99.3747" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 6621932717826619077 -->
<g id="node4" class="node">
<title>6621932717826619077</title>
<polygon fill="#d3d3d3" stroke="#000000" points="223,-54 169,-54 169,0 223,0 223,-54"/>
<text text-anchor="middle" x="196" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_4</text>
</g>
<!-- 2415785398561310194&#45;&#45;6621932717826619077 -->
<g id="edge7" class="edge">
<title>2415785398561310194&#45;&#45;6621932717826619077</title>
<path fill="none" stroke="#000000" d="M187.4012,-97.7747C189.1396,-83.4665 191.1023,-67.3116 192.7133,-54.0525"/>
<text text-anchor="start" x="191" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_4</text>
<text text-anchor="start" x="174.4906" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="175.4012" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 7584214037781745368 -->
<g id="node5" class="node">
<title>7584214037781745368</title>
<polygon fill="#d3d3d3" stroke="#000000" points="326.4729,-384 259.5271,-384 259.5271,-330 326.4729,-330 326.4729,-384"/>
<text text-anchor="middle" x="293" y="-354.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_z</text>
</g>
<!-- 7584214037781745368&#45;&#45;3159707208281223506 -->
<g id="edge4" class="edge">
<title>7584214037781745368&#45;&#45;3159707208281223506</title>
<path fill="none" stroke="#000000" d="M293,-329.9994C293,-316.7507 293,-300.6013 293,-286.2906"/>
<text text-anchor="start" x="293" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">z</text>
<text text-anchor="start" x="274.7773" y="-287.8906" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="274.7773" y="-323.5994" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 7801813689754346417 -->
<g id="node7" class="node">
<title>7801813689754346417</title>
<polygon fill="#d3d3d3" stroke="#000000" points="418,-54 364,-54 364,0 418,0 418,-54"/>
<text text-anchor="middle" x="391" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 14219268703650706622&#45;&#45;7801813689754346417 -->
<g id="edge3" class="edge">
<title>14219268703650706622&#45;&#45;7801813689754346417</title>
<path fill="none" stroke="#000000" d="M392.8898,-97.957C391.4628,-92.0108 390.2301,-85.8714 389.4531,-80 388.9867,-76.4752 389.392,-75.555 389.4531,-72 389.5525,-66.2162 389.7237,-60.0161 389.9168,-54.1236"/>
<text text-anchor="start" x="390" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="371.6942" y="-55.7236" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="378.6672" y="-91.557" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 6751984385592357756 -->
<g id="node8" class="node">
<title>6751984385592357756</title>
<polygon fill="#d3d3d3" stroke="#000000" points="587,-54 533,-54 533,0 587,0 587,-54"/>
<text text-anchor="middle" x="560" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_2</text>
</g>
<!-- 14219268703650706622&#45;&#45;6751984385592357756 -->
<g id="edge2" class="edge">
<title>14219268703650706622&#45;&#45;6751984385592357756</title>
<path fill="none" stroke="#000000" d="M456.8145,-97.7747C482.2714,-80.3138 511.7379,-60.1029 532.6484,-45.7604"/>
<text text-anchor="start" x="492" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_2</text>
<text text-anchor="start" x="514.4257" y="-47.3604" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="444.8145" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
</g>
</svg>
<h3><a class="nav-anchor" id="Online-vs.-offline-learning-1" href="#Online-vs.-offline-learning-1">Online vs. offline learning</a></h3><p>Online learning refers to a procedure where observations are processed as soon as they become available. In the context of factor graphs this means that observations need to be fed to the placeholders and processed one at a time. In a Bayesian setting, this reduces to the application of Bayes rule in a recursive fashion, i.e. the posterior distribution for a given random variable, becomes the prior for the next processing step. Since we are feeding one observation at each time step, the factor graph will have <em>one</em> placeholder for every observed variable. All of the factor graphs that we have seen so far were specified to process data in this fashion.</p><p>Let&#39;s take a look at an example in order to contrast it with its offline counterpart. In this simple example, the mean <code>x</code> of a Gaussian distributed random variable <code>y</code> is modelled by another Gaussian distribution with hyperparameters <code>m</code> and <code>v</code>. The variance of <code>y</code> is assumed to be known.</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
m = placeholder(:m)
v = placeholder(:v)
@RV x ~ GaussianMeanVariance(m, v)
@RV y ~ GaussianMeanVariance(x, 1.0)
placeholder(y, :y)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="355pt" height="392pt"
 viewBox="0.00 0.00 355.49 392.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 388)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-388 351.4883,-388 351.4883,4 -4,4"/>
<!-- 15049408728567333491 -->
<g id="node1" class="node">
<title>15049408728567333491</title>
<polygon fill="#d3d3d3" stroke="#000000" points="165.9787,-54 96.0213,-54 96.0213,0 165.9787,0 165.9787,-54"/>
<text text-anchor="middle" x="131" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_m</text>
</g>
<!-- 8036567789177627657 -->
<g id="node2" class="node">
<title>8036567789177627657</title>
<polygon fill="#d3d3d3" stroke="#000000" points="347.4766,-54 280.5234,-54 280.5234,0 347.4766,0 347.4766,-54"/>
<text text-anchor="middle" x="314" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_v</text>
</g>
<!-- 2922164996799735130 -->
<g id="node3" class="node">
<title>2922164996799735130</title>
<polygon fill="#d3d3d3" stroke="#000000" points="134.4766,-384 67.5234,-384 67.5234,-330 134.4766,-330 134.4766,-384"/>
<text text-anchor="middle" x="101" y="-354.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y</text>
</g>
<!-- 13163228593372015253 -->
<g id="node6" class="node">
<title>13163228593372015253</title>
<polygon fill="none" stroke="#000000" points="153.9605,-286 48.0395,-286 48.0395,-214 153.9605,-214 153.9605,-286"/>
<text text-anchor="middle" x="101" y="-252.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="101" y="-242.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_2</text>
</g>
<!-- 2922164996799735130&#45;&#45;13163228593372015253 -->
<g id="edge1" class="edge">
<title>2922164996799735130&#45;&#45;13163228593372015253</title>
<path fill="none" stroke="#000000" d="M101,-329.9994C101,-316.7507 101,-300.6013 101,-286.2906"/>
<text text-anchor="start" x="101" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="82.7773" y="-287.8906" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="82.7773" y="-323.5994" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 5470858188399211878 -->
<g id="node4" class="node">
<title>5470858188399211878</title>
<polygon fill="#d3d3d3" stroke="#000000" points="54,-161 0,-161 0,-107 54,-107 54,-161"/>
<text text-anchor="middle" x="27" y="-131.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 11840573813869889270 -->
<g id="node5" class="node">
<title>11840573813869889270</title>
<polygon fill="none" stroke="#000000" points="274.9605,-170 169.0395,-170 169.0395,-98 274.9605,-98 274.9605,-170"/>
<text text-anchor="middle" x="222" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="222" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 11840573813869889270&#45;&#45;15049408728567333491 -->
<g id="edge4" class="edge">
<title>11840573813869889270&#45;&#45;15049408728567333491</title>
<path fill="none" stroke="#000000" d="M181.0185,-97.7168C175.3276,-92.006 169.7387,-86.0005 164.7773,-80 158.1722,-72.0114 151.8178,-62.6532 146.4377,-54.042"/>
<text text-anchor="start" x="165" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="128.215" y="-55.642" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="166.7959" y="-91.3168" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 11840573813869889270&#45;&#45;8036567789177627657 -->
<g id="edge2" class="edge">
<title>11840573813869889270&#45;&#45;8036567789177627657</title>
<path fill="none" stroke="#000000" d="M253.147,-97.7747C265.4494,-83.4665 279.3395,-67.3116 290.7399,-54.0525"/>
<text text-anchor="start" x="273" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">v</text>
<text text-anchor="start" x="272.5173" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="241.147" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 13163228593372015253&#45;&#45;5470858188399211878 -->
<g id="edge3" class="edge">
<title>13163228593372015253&#45;&#45;5470858188399211878</title>
<path fill="none" stroke="#000000" d="M47.8259,-220.6143C39.6214,-213.6537 32.2823,-205.4509 27.4531,-196 22.0655,-185.4561 21.2242,-172.5263 22.0169,-161.2076"/>
<text text-anchor="start" x="28" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="3.7943" y="-162.8076" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="35.8259" y="-222.2143" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 13163228593372015253&#45;&#45;11840573813869889270 -->
<g id="edge5" class="edge">
<title>13163228593372015253&#45;&#45;11840573813869889270</title>
<path fill="none" stroke="#000000" d="M138.6219,-213.9327C153.1906,-199.9661 169.8349,-184.0095 184.4014,-170.045"/>
<text text-anchor="start" x="166" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="166.1787" y="-171.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="124.3992" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
</g>
</svg>
<p>As we have seen in previous examples, there is one placeholder linked to the observed variable <code>y</code> that accepts one observation at a time. Perhaps what is less obvious is that the hyperparameters <code>m</code> and <code>v</code> are also defined as placeholders. The reason for this is that we will use them to input our current (prior) belief about <code>x</code> for every observation that is processed. In section <a href="#Executing-an-algorithm-1">Executing an algorithm</a> we will elaborate more on this.</p><p>Offline learning, on the other hand, involves feeding and processing a batch of <code>N</code> observations (typically all available observations) in a single step. This translates into a factor graph that has one placeholder linked to a random variable for <em>each</em> sample in the batch. We can specify this type of models using a <code>for</code> loop like in the following example.</p><pre><code class="language-julia">g = FactorGraph()   # create a new factor graph
N = 3               # number of observations
y = Vector{Variable}(undef, N)
@RV x ~ GaussianMeanVariance(0.0, 1.0)
for i = 1:N
    @RV y[i] ~ GaussianMeanVariance(x, 1.0)
    placeholder(y[i], :y, index=i)
end
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="768pt" height="410pt"
 viewBox="0.00 0.00 767.96 410.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 406)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-406 763.9604,-406 763.9604,4 -4,4"/>
<!-- 4161081778125968101 -->
<g id="node1" class="node">
<title>4161081778125968101</title>
<polygon fill="#d3d3d3" stroke="#000000" points="675.9802,-54 621.9802,-54 621.9802,0 675.9802,0 675.9802,-54"/>
<text text-anchor="middle" x="648.9802" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_2</text>
</g>
<!-- 9964566501482410891 -->
<g id="node2" class="node">
<title>9964566501482410891</title>
<polygon fill="none" stroke="#000000" points="484.9802,-402 412.9802,-402 412.9802,-330 484.9802,-330 484.9802,-402"/>
<text text-anchor="middle" x="448.9802" y="-367.8" font-family="Times,serif" font-size="9.00" fill="#000000">=</text>
<text text-anchor="middle" x="448.9802" y="-358.8" font-family="Times,serif" font-size="9.00" fill="#000000">equ_x_2</text>
</g>
<!-- 9109220508503453615 -->
<g id="node7" class="node">
<title>9109220508503453615</title>
<polygon fill="none" stroke="#000000" points="484.9802,-286 412.9802,-286 412.9802,-214 484.9802,-214 484.9802,-286"/>
<text text-anchor="middle" x="448.9802" y="-251.8" font-family="Times,serif" font-size="9.00" fill="#000000">=</text>
<text text-anchor="middle" x="448.9802" y="-242.8" font-family="Times,serif" font-size="9.00" fill="#000000">equ_x_1</text>
</g>
<!-- 9964566501482410891&#45;&#45;9109220508503453615 -->
<g id="edge1" class="edge">
<title>9964566501482410891&#45;&#45;9109220508503453615</title>
<path fill="none" stroke="#000000" d="M448.9802,-329.9327C448.9802,-315.9661 448.9802,-300.0095 448.9802,-286.045"/>
<text text-anchor="start" x="448.9802" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="436.9802" y="-287.645" font-family="Times,serif" font-size="8.00" fill="#000000">3 3 </text>
<text text-anchor="start" x="436.9802" y="-323.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 2 </text>
</g>
<!-- 2618913957829389849 -->
<g id="node11" class="node">
<title>2618913957829389849</title>
<polygon fill="none" stroke="#000000" points="759.9407,-286 654.0198,-286 654.0198,-214 759.9407,-214 759.9407,-286"/>
<text text-anchor="middle" x="706.9802" y="-252.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="706.9802" y="-242.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_4</text>
</g>
<!-- 9964566501482410891&#45;&#45;2618913957829389849 -->
<g id="edge3" class="edge">
<title>9964566501482410891&#45;&#45;2618913957829389849</title>
<path fill="none" stroke="#000000" d="M485.1257,-349.7486C528.9492,-330.0449 603.187,-296.6667 653.6032,-273.999"/>
<text text-anchor="start" x="584.9802" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="639.3805" y="-275.599" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
<text text-anchor="start" x="485.1257" y="-351.3486" font-family="Times,serif" font-size="8.00" fill="#000000">3 3 </text>
</g>
<!-- 5486072716873283591 -->
<g id="node13" class="node">
<title>5486072716873283591</title>
<polygon fill="none" stroke="#000000" points="105.9407,-286 .0198,-286 .0198,-214 105.9407,-214 105.9407,-286"/>
<text text-anchor="middle" x="52.9802" y="-252.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="52.9802" y="-242.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_3</text>
</g>
<!-- 9964566501482410891&#45;&#45;5486072716873283591 -->
<g id="edge4" class="edge">
<title>9964566501482410891&#45;&#45;5486072716873283591</title>
<path fill="none" stroke="#000000" d="M412.8544,-356.3564C358.62,-341.7667 253.0174,-312.9232 163.9802,-286 145.0732,-280.2829 124.467,-273.6986 106.1985,-267.7371"/>
<text text-anchor="start" x="249.9802" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="106.1985" y="-269.3371" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
<text text-anchor="start" x="400.8544" y="-357.9564" font-family="Times,serif" font-size="8.00" fill="#000000">1 1 </text>
</g>
<!-- 2754632160704331606 -->
<g id="node3" class="node">
<title>2754632160704331606</title>
<polygon fill="none" stroke="#000000" points="328.9407,-170 223.0198,-170 223.0198,-98 328.9407,-98 328.9407,-170"/>
<text text-anchor="middle" x="275.9802" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="275.9802" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_2</text>
</g>
<!-- 15290339355649463174 -->
<g id="node10" class="node">
<title>15290339355649463174</title>
<polygon fill="#d3d3d3" stroke="#000000" points="302.9802,-54 248.9802,-54 248.9802,0 302.9802,0 302.9802,-54"/>
<text text-anchor="middle" x="275.9802" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_3</text>
</g>
<!-- 2754632160704331606&#45;&#45;15290339355649463174 -->
<g id="edge10" class="edge">
<title>2754632160704331606&#45;&#45;15290339355649463174</title>
<path fill="none" stroke="#000000" d="M275.9802,-97.7747C275.9802,-83.4665 275.9802,-67.3116 275.9802,-54.0525"/>
<text text-anchor="start" x="275.9802" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_3</text>
<text text-anchor="start" x="257.7576" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="263.9802" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 8829528836494111304 -->
<g id="node4" class="node">
<title>8829528836494111304</title>
<polygon fill="#d3d3d3" stroke="#000000" points="296.9568,-277 221.0037,-277 221.0037,-223 296.9568,-223 296.9568,-277"/>
<text text-anchor="middle" x="258.9802" y="-247.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y_1</text>
</g>
<!-- 8829528836494111304&#45;&#45;2754632160704331606 -->
<g id="edge6" class="edge">
<title>8829528836494111304&#45;&#45;2754632160704331606</title>
<path fill="none" stroke="#000000" d="M255.7647,-222.9833C255.0713,-212.0537 255.0402,-199.3589 256.9802,-188 257.9841,-182.1221 259.5612,-176.0331 261.3875,-170.155"/>
<text text-anchor="start" x="256.9802" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y_1</text>
<text text-anchor="start" x="243.1649" y="-171.755" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="237.5421" y="-216.5833" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 1732067066214669481 -->
<g id="node5" class="node">
<title>1732067066214669481</title>
<polygon fill="#d3d3d3" stroke="#000000" points="90.9568,-393 15.0037,-393 15.0037,-339 90.9568,-339 90.9568,-393"/>
<text text-anchor="middle" x="52.9802" y="-363.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y_2</text>
</g>
<!-- 1732067066214669481&#45;&#45;5486072716873283591 -->
<g id="edge7" class="edge">
<title>1732067066214669481&#45;&#45;5486072716873283591</title>
<path fill="none" stroke="#000000" d="M52.9802,-338.8032C52.9802,-323.1333 52.9802,-303.2377 52.9802,-286.252"/>
<text text-anchor="start" x="52.9802" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y_2</text>
<text text-anchor="start" x="34.7576" y="-287.852" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="34.7576" y="-332.4032" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 9162800934266124826 -->
<g id="node6" class="node">
<title>9162800934266124826</title>
<polygon fill="#d3d3d3" stroke="#000000" points="79.9802,-161 25.9802,-161 25.9802,-107 79.9802,-107 79.9802,-161"/>
<text text-anchor="middle" x="52.9802" y="-131.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_4</text>
</g>
<!-- 9109220508503453615&#45;&#45;2754632160704331606 -->
<g id="edge9" class="edge">
<title>9109220508503453615&#45;&#45;2754632160704331606</title>
<path fill="none" stroke="#000000" d="M412.7138,-225.6826C388.4391,-209.4059 356.0872,-187.7133 328.9465,-169.515"/>
<text text-anchor="start" x="367.9802" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="328.9465" y="-171.115" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
<text text-anchor="start" x="400.7138" y="-227.2826" font-family="Times,serif" font-size="8.00" fill="#000000">2 2 </text>
</g>
<!-- 1847774635550485623 -->
<g id="node12" class="node">
<title>1847774635550485623</title>
<polygon fill="none" stroke="#000000" points="565.9407,-170 460.0198,-170 460.0198,-98 565.9407,-98 565.9407,-170"/>
<text text-anchor="middle" x="512.9802" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="512.9802" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 9109220508503453615&#45;&#45;1847774635550485623 -->
<g id="edge12" class="edge">
<title>9109220508503453615&#45;&#45;1847774635550485623</title>
<path fill="none" stroke="#000000" d="M468.8794,-213.9327C476.5851,-199.9661 485.3888,-184.0095 493.0934,-170.045"/>
<text text-anchor="start" x="481.9802" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">x</text>
<text text-anchor="start" x="474.8707" y="-171.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="456.8794" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">1 1 </text>
</g>
<!-- 5976949096990279911 -->
<g id="node8" class="node">
<title>5976949096990279911</title>
<polygon fill="#d3d3d3" stroke="#000000" points="744.9568,-393 669.0037,-393 669.0037,-339 744.9568,-339 744.9568,-393"/>
<text text-anchor="middle" x="706.9802" y="-363.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y_3</text>
</g>
<!-- 5976949096990279911&#45;&#45;2618913957829389849 -->
<g id="edge5" class="edge">
<title>5976949096990279911&#45;&#45;2618913957829389849</title>
<path fill="none" stroke="#000000" d="M706.9802,-338.8032C706.9802,-323.1333 706.9802,-303.2377 706.9802,-286.252"/>
<text text-anchor="start" x="706.9802" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y_3</text>
<text text-anchor="start" x="688.7576" y="-287.852" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="688.7576" y="-332.4032" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 15808341308509220757 -->
<g id="node9" class="node">
<title>15808341308509220757</title>
<polygon fill="#d3d3d3" stroke="#000000" points="506.9802,-54 452.9802,-54 452.9802,0 506.9802,0 506.9802,-54"/>
<text text-anchor="middle" x="479.9802" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 6664479149144914544 -->
<g id="node14" class="node">
<title>6664479149144914544</title>
<polygon fill="#d3d3d3" stroke="#000000" points="734.9802,-161 680.9802,-161 680.9802,-107 734.9802,-107 734.9802,-161"/>
<text text-anchor="middle" x="707.9802" y="-131.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_5</text>
</g>
<!-- 2618913957829389849&#45;&#45;6664479149144914544 -->
<g id="edge11" class="edge">
<title>2618913957829389849&#45;&#45;6664479149144914544</title>
<path fill="none" stroke="#000000" d="M707.2911,-213.9327C707.4379,-196.9067 707.6102,-176.9235 707.7458,-161.1968"/>
<text text-anchor="start" x="706.9802" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_5</text>
<text text-anchor="start" x="689.5231" y="-162.7968" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="695.2911" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 1847774635550485623&#45;&#45;4161081778125968101 -->
<g id="edge13" class="edge">
<title>1847774635550485623&#45;&#45;4161081778125968101</title>
<path fill="none" stroke="#000000" d="M559.0236,-97.7747C579.8298,-81.4051 603.7081,-62.6185 621.6324,-48.5163"/>
<text text-anchor="start" x="588.9802" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_2</text>
<text text-anchor="start" x="603.4098" y="-50.1163" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="547.0236" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 1847774635550485623&#45;&#45;15808341308509220757 -->
<g id="edge2" class="edge">
<title>1847774635550485623&#45;&#45;15808341308509220757</title>
<path fill="none" stroke="#000000" d="M486.0373,-97.8765C482.9149,-92.143 480.2143,-86.0886 478.4333,-80 476.0299,-71.7834 475.5769,-62.542 475.9743,-54.1049"/>
<text text-anchor="start" x="477.9802" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="457.7517" y="-55.7049" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="471.8146" y="-91.4765" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 5486072716873283591&#45;&#45;9162800934266124826 -->
<g id="edge8" class="edge">
<title>5486072716873283591&#45;&#45;9162800934266124826</title>
<path fill="none" stroke="#000000" d="M52.9802,-213.9327C52.9802,-196.9067 52.9802,-176.9235 52.9802,-161.1968"/>
<text text-anchor="start" x="52.9802" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_4</text>
<text text-anchor="start" x="34.7576" y="-162.7968" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="40.9802" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
</g>
</svg>
<p>The important thing to note here is that we need an extra array of <code>N</code> observed random variables where each of them is linked to a dedicated index of the placeholder&#39;s buffer. This buffer can be thought of as an <code>N</code> dimensional array of <code>Clamp</code> factor nodes. We achieve this link by means of the <code>index</code> parameter of the <code>placeholder</code> function.</p><p>In section <a href="#Executing-an-algorithm-1">Executing an algorithm</a> we will see examples of how the data is fed to the placeholders in each of these two scenarios.</p><h2><a class="nav-anchor" id="Generating-an-algorithm-1" href="#Generating-an-algorithm-1">Generating an algorithm</a></h2><p>ForneyLab supports code generation for four different types of message-passing algorithms:</p><ul><li><a href="https://en.wikipedia.org/wiki/Belief_propagation">Belief propagation</a></li><li><a href="https://en.wikipedia.org/wiki/Variational_message_passing">Variational message passing</a></li><li><a href="https://en.wikipedia.org/wiki/Expectation-maximization_algorithm">Expectation maximization</a></li><li><a href="https://en.wikipedia.org/wiki/Expectation_propagation">Expectation propagation</a></li></ul><p>Whereas belief propagation computes exact inference for the random variables of interest, the variational message passing (VMP), expectation maximization (EM) and expectation propagation (EP) algorithms are approximation methods that can be applied to a larger range of models.</p><h3><a class="nav-anchor" id="Belief-propagation-1" href="#Belief-propagation-1">Belief propagation</a></h3><p>The way to instruct ForneyLab to generate a belief propagation algorithm (also known as a sum-product algorithm) is by using the <code>sumProductAlgorithm</code> function. This function takes as argument(s) the random variable(s) for which we want to infer the posterior distribution. As an example, consider the following hierarchical model in which the mean of a Gaussian distribution is represented by another Gaussian distribution whose mean is modelled by another Gaussian distribution.  </p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV m2 ~ GaussianMeanVariance(0.0, 1.0)
@RV m1 ~ GaussianMeanVariance(m2, 1.0)
@RV y ~ GaussianMeanVariance(m1, 1.0)
placeholder(y, :y)
ForneyLab.draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="451pt" height="508pt"
 viewBox="0.00 0.00 451.00 508.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 504)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-504 447,-504 447,4 -4,4"/>
<!-- 8423734126550316772 -->
<g id="node1" class="node">
<title>8423734126550316772</title>
<polygon fill="#d3d3d3" stroke="#000000" points="274,-54 220,-54 220,0 274,0 274,-54"/>
<text text-anchor="middle" x="247" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 7169142512010633498 -->
<g id="node2" class="node">
<title>7169142512010633498</title>
<polygon fill="#d3d3d3" stroke="#000000" points="443,-54 389,-54 389,0 443,0 443,-54"/>
<text text-anchor="middle" x="416" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_2</text>
</g>
<!-- 6051169997584312070 -->
<g id="node3" class="node">
<title>6051169997584312070</title>
<polygon fill="#d3d3d3" stroke="#000000" points="164,-161 110,-161 110,-107 164,-107 164,-161"/>
<text text-anchor="middle" x="137" y="-131.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_3</text>
</g>
<!-- 15095055193277803806 -->
<g id="node4" class="node">
<title>15095055193277803806</title>
<polygon fill="none" stroke="#000000" points="384.9605,-170 279.0395,-170 279.0395,-98 384.9605,-98 384.9605,-170"/>
<text text-anchor="middle" x="332" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="332" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 15095055193277803806&#45;&#45;8423734126550316772 -->
<g id="edge1" class="edge">
<title>15095055193277803806&#45;&#45;8423734126550316772</title>
<path fill="none" stroke="#000000" d="M303.2229,-97.7747C291.8565,-83.4665 279.0233,-67.3116 268.4903,-54.0525"/>
<text text-anchor="start" x="286" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="250.2676" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="289.0002" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 15095055193277803806&#45;&#45;7169142512010633498 -->
<g id="edge7" class="edge">
<title>15095055193277803806&#45;&#45;7169142512010633498</title>
<path fill="none" stroke="#000000" d="M360.4386,-97.7747C371.6712,-83.4665 384.3535,-67.3116 394.7626,-54.0525"/>
<text text-anchor="start" x="379" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_2</text>
<text text-anchor="start" x="376.5399" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="348.4386" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 10728761831785646192 -->
<g id="node5" class="node">
<title>10728761831785646192</title>
<polygon fill="#d3d3d3" stroke="#000000" points="54,-277 0,-277 0,-223 54,-223 54,-277"/>
<text text-anchor="middle" x="27" y="-247.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_4</text>
</g>
<!-- 1913369787674951518 -->
<g id="node6" class="node">
<title>1913369787674951518</title>
<polygon fill="none" stroke="#000000" points="153.9605,-402 48.0395,-402 48.0395,-330 153.9605,-330 153.9605,-402"/>
<text text-anchor="middle" x="101" y="-368.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="101" y="-358.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_3</text>
</g>
<!-- 1913369787674951518&#45;&#45;10728761831785646192 -->
<g id="edge4" class="edge">
<title>1913369787674951518&#45;&#45;10728761831785646192</title>
<path fill="none" stroke="#000000" d="M47.8259,-336.6143C39.6214,-329.6537 32.2823,-321.4509 27.4531,-312 22.0655,-301.4561 21.2242,-288.5263 22.0169,-277.2076"/>
<text text-anchor="start" x="28" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_4</text>
<text text-anchor="start" x="3.7943" y="-278.8076" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="35.8259" y="-338.2143" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 8215189392076342462 -->
<g id="node8" class="node">
<title>8215189392076342462</title>
<polygon fill="none" stroke="#000000" points="274.9605,-286 169.0395,-286 169.0395,-214 274.9605,-214 274.9605,-286"/>
<text text-anchor="middle" x="222" y="-252.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="222" y="-242.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_2</text>
</g>
<!-- 1913369787674951518&#45;&#45;8215189392076342462 -->
<g id="edge2" class="edge">
<title>1913369787674951518&#45;&#45;8215189392076342462</title>
<path fill="none" stroke="#000000" d="M138.6219,-329.9327C153.1906,-315.9661 169.8349,-300.0095 184.4014,-286.045"/>
<text text-anchor="start" x="166" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m1</text>
<text text-anchor="start" x="166.1787" y="-287.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="124.3992" y="-323.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 12998865721254228275 -->
<g id="node7" class="node">
<title>12998865721254228275</title>
<polygon fill="#d3d3d3" stroke="#000000" points="134.4766,-500 67.5234,-500 67.5234,-446 134.4766,-446 134.4766,-500"/>
<text text-anchor="middle" x="101" y="-470.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y</text>
</g>
<!-- 12998865721254228275&#45;&#45;1913369787674951518 -->
<g id="edge5" class="edge">
<title>12998865721254228275&#45;&#45;1913369787674951518</title>
<path fill="none" stroke="#000000" d="M101,-445.9994C101,-432.7507 101,-416.6013 101,-402.2906"/>
<text text-anchor="start" x="101" y="-421.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="82.7773" y="-403.8906" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="82.7773" y="-439.5994" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 8215189392076342462&#45;&#45;6051169997584312070 -->
<g id="edge3" class="edge">
<title>8215189392076342462&#45;&#45;6051169997584312070</title>
<path fill="none" stroke="#000000" d="M168.8108,-227.2503C156.34,-219.2634 144.6137,-208.9573 137.4531,-196 131.674,-185.5424 130.8212,-172.4973 131.7093,-161.0746"/>
<text text-anchor="start" x="138" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_3</text>
<text text-anchor="start" x="113.4866" y="-162.6746" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="156.8108" y="-228.8503" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 8215189392076342462&#45;&#45;15095055193277803806 -->
<g id="edge6" class="edge">
<title>8215189392076342462&#45;&#45;15095055193277803806</title>
<path fill="none" stroke="#000000" d="M256.2017,-213.9327C269.446,-199.9661 284.5772,-184.0095 297.8194,-170.045"/>
<text text-anchor="start" x="280" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m2</text>
<text text-anchor="start" x="279.5968" y="-171.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="241.9791" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
</g>
</svg>
<p>If we were only interested in inferring the posterior distribution of <code>m1</code> then we would run</p><pre><code class="language-julia">algorithm_string = sumProductAlgorithm(m1)
;</code></pre><p>On the other hand, if we were interested in the posterior distributions of both <code>m1</code> and <code>m2</code> we would then need to pass them as elements of an array, i.e.</p><pre><code class="language-julia">algorithm_string = sumProductAlgorithm([m1, m2])
;</code></pre><p>Note that the message-passing algorithm returned by the <code>sumProductAlgorithm</code> function is a <code>String</code> that contains the definition of a Julia function. In order to be able to execute this function, we first need to parse this string as Julia expression to then evaluate it in the current scope that the program is running on. This can be done as follows</p><pre><code class="language-julia">algorithm_expr = Meta.parse(algorithm_string)
;</code></pre><pre><code class="language-julia">:(function step!(data::Dict, marginals::Dict=Dict(), messages::Vector{Message}=Array{Message}(undef, 4))
      #= none:3 =#
      messages[1] = ruleSPGaussianMeanVarianceOutNPP(nothing, Message(Univariate, PointMass, m=0.0), Message(Univariate, PointMass, m=1.0))
      #= none:4 =#
      messages[2] = ruleSPGaussianMeanVarianceOutNGP(nothing, messages[1], Message(Univariate, PointMass, m=1.0))
      #= none:5 =#
      messages[3] = ruleSPGaussianMeanVarianceMPNP(Message(Univariate, PointMass, m=data[:y]), nothing, Message(Univariate, PointMass, m=1.0))
      #= none:6 =#
      messages[4] = ruleSPGaussianMeanVarianceMGNP(messages[3], nothing, Message(Univariate, PointMass, m=1.0))
      #= none:8 =#
      marginals[:m1] = (messages[2]).dist * (messages[3]).dist
      #= none:9 =#
      marginals[:m2] = (messages[1]).dist * (messages[4]).dist
      #= none:11 =#
      return marginals
  end)</code></pre><pre><code class="language-julia">eval(algorithm_expr)</code></pre><pre><code class="language-none">step! (generic function with 3 methods)</code></pre><p>At this point a new function named <code>step!</code> becomes available in the current scope. This function contains a message-passing algorithm that infers both <code>m1</code> and <code>m2</code> given one or more <code>y</code> observations. In the section <a href="#Executing-an-algorithm-1">Executing an algorithm</a> we will see how this function is used.</p><h3><a class="nav-anchor" id="Variational-message-passing-1" href="#Variational-message-passing-1">Variational message passing</a></h3><p>Variational message passing (VMP) algorithms are generated much in the same way as the belief propagation algorithm we saw in the previous section. There is a major difference though: for VMP algorithm generation we need to define the factorization properties of our approximate distribution. A common approach is to assume that all random variables of the model factorize with respect to each other. This is known as the <em>mean field</em> assumption. In ForneyLab, the specification of such factorization properties is defined using the <code>RecognitionFactorization</code> composite type. Let&#39;s take a look at a simple example to see how it is used. In this model we want to learn the mean and variance of a Gaussian distribution, where the former is modelled with a Gaussian distribution and the latter with a Gamma.</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
@RV m ~ GaussianMeanVariance(0, 10)
@RV w ~ Gamma(0.1, 0.1)
@RV y ~ GaussianMeanPrecision(m, w)
placeholder(y, :y)
draw(g)</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="586pt" height="392pt"
 viewBox="0.00 0.00 586.00 392.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 388)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-388 582,-388 582,4 -4,4"/>
<!-- 10337771472225734711 -->
<g id="node1" class="node">
<title>10337771472225734711</title>
<polygon fill="#d3d3d3" stroke="#000000" points="409,-54 355,-54 355,0 409,0 409,-54"/>
<text text-anchor="middle" x="382" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_4</text>
</g>
<!-- 13475626783619381089 -->
<g id="node2" class="node">
<title>13475626783619381089</title>
<polygon fill="none" stroke="#000000" points="343.4752,-286 234.5248,-286 234.5248,-214 343.4752,-214 343.4752,-286"/>
<text text-anchor="middle" x="289" y="-252.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="289" y="-242.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanprecision_1</text>
</g>
<!-- 17849348209608492981 -->
<g id="node3" class="node">
<title>17849348209608492981</title>
<polygon fill="none" stroke="#000000" points="239.9605,-170 134.0395,-170 134.0395,-98 239.9605,-98 239.9605,-170"/>
<text text-anchor="middle" x="187" y="-136.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="187" y="-126.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 13475626783619381089&#45;&#45;17849348209608492981 -->
<g id="edge2" class="edge">
<title>13475626783619381089&#45;&#45;17849348209608492981</title>
<path fill="none" stroke="#000000" d="M247.0447,-213.9696C241.0274,-208.1758 235.0849,-202.0793 229.7773,-196 222.8109,-188.0205 215.9703,-178.8836 209.8734,-170.1204"/>
<text text-anchor="start" x="230" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="191.6508" y="-171.7204" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="232.822" y="-207.5696" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 8523756707923693308 -->
<g id="node8" class="node">
<title>8523756707923693308</title>
<polygon fill="none" stroke="#000000" points="427,-170 355,-170 355,-98 427,-98 427,-170"/>
<text text-anchor="middle" x="391" y="-135.8" font-family="Times,serif" font-size="9.00" fill="#000000">Gam</text>
<text text-anchor="middle" x="391" y="-126.8" font-family="Times,serif" font-size="9.00" fill="#000000">gamma_1</text>
</g>
<!-- 13475626783619381089&#45;&#45;8523756707923693308 -->
<g id="edge6" class="edge">
<title>13475626783619381089&#45;&#45;8523756707923693308</title>
<path fill="none" stroke="#000000" d="M320.7143,-213.9327C332.9953,-199.9661 347.0261,-184.0095 359.3053,-170.045"/>
<text text-anchor="start" x="344" y="-189.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">w</text>
<text text-anchor="start" x="341.0826" y="-171.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="306.937" y="-207.5327" font-family="Times,serif" font-size="8.00" fill="#000000">3 w </text>
</g>
<!-- 13077566886545514601 -->
<g id="node6" class="node">
<title>13077566886545514601</title>
<polygon fill="#d3d3d3" stroke="#000000" points="54,-54 0,-54 0,0 54,0 54,-54"/>
<text text-anchor="middle" x="27" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_1</text>
</g>
<!-- 17849348209608492981&#45;&#45;13077566886545514601 -->
<g id="edge7" class="edge">
<title>17849348209608492981&#45;&#45;13077566886545514601</title>
<path fill="none" stroke="#000000" d="M133.7223,-98.3705C106.9958,-80.4972 75.7738,-59.6175 54.0315,-45.0773"/>
<text text-anchor="start" x="103" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_1</text>
<text text-anchor="start" x="54.0315" y="-46.6773" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="119.4997" y="-99.9705" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 14974298806258661256 -->
<g id="node7" class="node">
<title>14974298806258661256</title>
<polygon fill="#d3d3d3" stroke="#000000" points="223,-54 169,-54 169,0 223,0 223,-54"/>
<text text-anchor="middle" x="196" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_2</text>
</g>
<!-- 17849348209608492981&#45;&#45;14974298806258661256 -->
<g id="edge1" class="edge">
<title>17849348209608492981&#45;&#45;14974298806258661256</title>
<path fill="none" stroke="#000000" d="M190.047,-97.7747C191.2505,-83.4665 192.6093,-67.3116 193.7246,-54.0525"/>
<text text-anchor="start" x="193" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_2</text>
<text text-anchor="start" x="175.5019" y="-55.6525" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="178.047" y="-91.3747" font-family="Times,serif" font-size="8.00" fill="#000000">3 v </text>
</g>
<!-- 2834443585924642022 -->
<g id="node4" class="node">
<title>2834443585924642022</title>
<polygon fill="#d3d3d3" stroke="#000000" points="578,-54 524,-54 524,0 578,0 578,-54"/>
<text text-anchor="middle" x="551" y="-24.3" font-family="Times,serif" font-size="9.00" fill="#000000">clamp_3</text>
</g>
<!-- 4369653717804918136 -->
<g id="node5" class="node">
<title>4369653717804918136</title>
<polygon fill="#d3d3d3" stroke="#000000" points="322.4766,-384 255.5234,-384 255.5234,-330 322.4766,-330 322.4766,-384"/>
<text text-anchor="middle" x="289" y="-354.3" font-family="Times,serif" font-size="9.00" fill="#000000">placeholder_y</text>
</g>
<!-- 4369653717804918136&#45;&#45;13475626783619381089 -->
<g id="edge5" class="edge">
<title>4369653717804918136&#45;&#45;13475626783619381089</title>
<path fill="none" stroke="#000000" d="M289,-329.9994C289,-316.7507 289,-300.6013 289,-286.2906"/>
<text text-anchor="start" x="289" y="-305.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">y</text>
<text text-anchor="start" x="270.7773" y="-287.8906" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="270.7773" y="-323.5994" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
</g>
<!-- 8523756707923693308&#45;&#45;10337771472225734711 -->
<g id="edge4" class="edge">
<title>8523756707923693308&#45;&#45;10337771472225734711</title>
<path fill="none" stroke="#000000" d="M382.9409,-97.8322C381.9067,-91.9015 381.0142,-85.7997 380.4531,-80 380.1108,-76.461 380.392,-75.555 380.4531,-72 380.5525,-66.2162 380.7237,-60.0161 380.9168,-54.1236"/>
<text text-anchor="start" x="381" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_4</text>
<text text-anchor="start" x="362.6942" y="-55.7236" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="370.9409" y="-91.4322" font-family="Times,serif" font-size="8.00" fill="#000000">3 b </text>
</g>
<!-- 8523756707923693308&#45;&#45;2834443585924642022 -->
<g id="edge3" class="edge">
<title>8523756707923693308&#45;&#45;2834443585924642022</title>
<path fill="none" stroke="#000000" d="M427.3065,-109.72C456.6263,-90.1124 497.2411,-62.9513 523.81,-45.1833"/>
<text text-anchor="start" x="480" y="-73.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">clamp_3</text>
<text text-anchor="start" x="505.5874" y="-46.7833" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="427.3065" y="-111.32" font-family="Times,serif" font-size="8.00" fill="#000000">2 a </text>
</g>
</g>
</svg>
<p>The construct of the <code>RecognitionFactorization</code> composite type takes the random variables of interest as arguments and one final argument consisting of an array of symbols used to identify each of these random variables. Here is an example of how to use this construct for the previous model where we want to infer <code>m</code> and <code>w</code>.</p><pre><code class="language-julia">q = RecognitionFactorization(m, w, ids=[:M, :W])
;</code></pre><p>This recognition factorization constraint that we introduce to guarantee tractability of the approximate distribution has a graphical interpretation. We can view this constraint as a division of the factor graph into a number of different subgraphs, each corresponding to a different factor in the recognition factorization. Minimization of the free energy is performed by iterating over each subgraph in order to update the posterior marginal corresponding to the current factor which depends on messages coming from the other subgraphs. This iteration is repeated until either the free energy converges to a certain value or the posterior marginals of each factor stop changing. We can use the <code>ids</code> passed to the <code>RecognitionFactorization</code> function to visualize their corresponding subgraphs, as shown below.   </p><pre><code class="language-julia">ForneyLab.draw(q.recognition_factors[:M])</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="261pt" height="292pt"
 viewBox="0.00 0.00 261.15 292.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 288)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-288 257.1538,-288 257.1538,4 -4,4"/>
<!-- 13475626783619381089 -->
<g id="node1" class="node">
<title>13475626783619381089</title>
<polygon fill="none" stroke="#000000" points="215.129,-236 106.1787,-236 106.1787,-164 215.129,-164 215.129,-236"/>
<text text-anchor="middle" x="160.6538" y="-202.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="160.6538" y="-192.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanprecision_1</text>
</g>
<!-- 17849348209608492981 -->
<g id="node2" class="node">
<title>17849348209608492981</title>
<polygon fill="none" stroke="#000000" points="127.6143,-120 21.6934,-120 21.6934,-48 127.6143,-48 127.6143,-120"/>
<text text-anchor="middle" x="74.6538" y="-86.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="74.6538" y="-76.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanvariance_1</text>
</g>
<!-- 13475626783619381089&#45;&#45;17849348209608492981 -->
<g id="edge1" class="edge">
<title>13475626783619381089&#45;&#45;17849348209608492981</title>
<path fill="none" stroke="#000000" d="M133.9143,-163.9327C123.5597,-149.9661 111.7298,-134.0095 101.3768,-120.045"/>
<text text-anchor="start" x="120.6538" y="-139.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">m</text>
<text text-anchor="start" x="83.1541" y="-121.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="119.6916" y="-157.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 m </text>
</g>
<!-- 8523756707923693308 -->
<g id="node4" class="node">
<title>8523756707923693308</title>
</g>
<!-- 13475626783619381089&#45;&#45;8523756707923693308 -->
<g id="edge4" class="edge">
<title>13475626783619381089&#45;&#45;8523756707923693308</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M187.7043,-163.9327C207.8562,-137.0635 233.5316,-102.8296 243.4668,-89.5827"/>
<text text-anchor="middle" x="235.3555" y="-91.1827" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="181.8156" y="-157.5327" font-family="Times,serif" font-size="8.00" fill="#000000">3 w</text>
</g>
<!-- 14974298806258661256 -->
<g id="node5" class="node">
<title>14974298806258661256</title>
</g>
<!-- 17849348209608492981&#45;&#45;14974298806258661256 -->
<g id="edge2" class="edge">
<title>17849348209608492981&#45;&#45;14974298806258661256</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M45.7352,-47.9665C34.3491,-33.779 22.5101,-19.0273 16.2227,-11.1929"/>
<text text-anchor="middle" x="8.1113" y="-12.7929" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="40.7352" y="-41.5665" font-family="Times,serif" font-size="8.00" fill="#000000">3 v</text>
</g>
<!-- 13077566886545514601 -->
<g id="node6" class="node">
<title>13077566886545514601</title>
</g>
<!-- 17849348209608492981&#45;&#45;13077566886545514601 -->
<g id="edge5" class="edge">
<title>17849348209608492981&#45;&#45;13077566886545514601</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M103.5724,-47.9665C114.9585,-33.779 126.7975,-19.0273 133.085,-11.1929"/>
<text text-anchor="middle" x="124.9736" y="-12.7929" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="97.4611" y="-41.5665" font-family="Times,serif" font-size="8.00" fill="#000000">2 m</text>
</g>
<!-- 4369653717804918136 -->
<g id="node3" class="node">
<title>4369653717804918136</title>
</g>
<!-- 4369653717804918136&#45;&#45;13475626783619381089 -->
<g id="edge3" class="edge">
<title>4369653717804918136&#45;&#45;13475626783619381089</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M160.6538,-272.8545C160.6538,-265.0501 160.6538,-250.3167 160.6538,-236.1302"/>
<text text-anchor="middle" x="152.5425" y="-237.7302" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="152.5425" y="-266.4545" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
</g>
</g>
</svg>
<pre><code class="language-julia">ForneyLab.draw(q.recognition_factors[:W])</code></pre><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: G Pages: 1 -->
<svg width="245pt" height="292pt"
 viewBox="0.00 0.00 245.15 292.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 288)">
<title>G</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-288 241.1538,-288 241.1538,4 -4,4"/>
<!-- 13475626783619381089 -->
<g id="node1" class="node">
<title>13475626783619381089</title>
<polygon fill="none" stroke="#000000" points="207.129,-236 98.1787,-236 98.1787,-164 207.129,-164 207.129,-236"/>
<text text-anchor="middle" x="152.6538" y="-202.43" font-family="Times,serif" font-size="9.00" fill="#000000">ùí©</text>
<text text-anchor="middle" x="152.6538" y="-192.17" font-family="Times,serif" font-size="9.00" fill="#000000">gaussianmeanprecision_1</text>
</g>
<!-- 8523756707923693308 -->
<g id="node2" class="node">
<title>8523756707923693308</title>
<polygon fill="none" stroke="#000000" points="110.6538,-120 38.6538,-120 38.6538,-48 110.6538,-48 110.6538,-120"/>
<text text-anchor="middle" x="74.6538" y="-85.8" font-family="Times,serif" font-size="9.00" fill="#000000">Gam</text>
<text text-anchor="middle" x="74.6538" y="-76.8" font-family="Times,serif" font-size="9.00" fill="#000000">gamma_1</text>
</g>
<!-- 13475626783619381089&#45;&#45;8523756707923693308 -->
<g id="edge1" class="edge">
<title>13475626783619381089&#45;&#45;8523756707923693308</title>
<path fill="none" stroke="#000000" d="M128.4017,-163.9327C119.0103,-149.9661 108.2809,-134.0095 98.8909,-120.045"/>
<text text-anchor="start" x="116.6538" y="-139.6" font-family="Times,serif" font-size="8.00" fill="#ff0000">w</text>
<text text-anchor="start" x="80.6683" y="-121.645" font-family="Times,serif" font-size="8.00" fill="#000000">1 out </text>
<text text-anchor="start" x="114.6243" y="-157.5327" font-family="Times,serif" font-size="8.00" fill="#000000">3 w </text>
</g>
<!-- 17849348209608492981 -->
<g id="node4" class="node">
<title>17849348209608492981</title>
</g>
<!-- 13475626783619381089&#45;&#45;17849348209608492981 -->
<g id="edge2" class="edge">
<title>13475626783619381089&#45;&#45;17849348209608492981</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M177.2169,-163.9327C195.5157,-137.0635 218.8302,-102.8296 227.8518,-89.5827"/>
<text text-anchor="middle" x="219.7405" y="-91.1827" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="171.1055" y="-157.5327" font-family="Times,serif" font-size="8.00" fill="#000000">2 m</text>
</g>
<!-- 10337771472225734711 -->
<g id="node3" class="node">
<title>10337771472225734711</title>
</g>
<!-- 8523756707923693308&#45;&#45;10337771472225734711 -->
<g id="edge4" class="edge">
<title>8523756707923693308&#45;&#45;10337771472225734711</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M45.7352,-47.9665C34.3491,-33.779 22.5101,-19.0273 16.2227,-11.1929"/>
<text text-anchor="middle" x="8.1113" y="-12.7929" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="40.7352" y="-41.5665" font-family="Times,serif" font-size="8.00" fill="#000000">3 b</text>
</g>
<!-- 2834443585924642022 -->
<g id="node5" class="node">
<title>2834443585924642022</title>
</g>
<!-- 8523756707923693308&#45;&#45;2834443585924642022 -->
<g id="edge3" class="edge">
<title>8523756707923693308&#45;&#45;2834443585924642022</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M103.5724,-47.9665C114.9585,-33.779 126.7975,-19.0273 133.085,-11.1929"/>
<text text-anchor="middle" x="124.9736" y="-12.7929" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="98.797" y="-41.5665" font-family="Times,serif" font-size="8.00" fill="#000000">2 a</text>
</g>
<!-- 4369653717804918136 -->
<g id="node6" class="node">
<title>4369653717804918136</title>
</g>
<!-- 4369653717804918136&#45;&#45;13475626783619381089 -->
<g id="edge5" class="edge">
<title>4369653717804918136&#45;&#45;13475626783619381089</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M152.6538,-272.8545C152.6538,-265.0501 152.6538,-250.3167 152.6538,-236.1302"/>
<text text-anchor="middle" x="144.5425" y="-237.7302" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
<text text-anchor="middle" x="144.5425" y="-266.4545" font-family="Times,serif" font-size="8.00" fill="#000000">1 out</text>
</g>
</g>
</svg>
<p>Generating the VMP algorithm follows the same procedure that we saw for the belief propagation algorithm. In this case, however, the resulting algorithm will consist of a set of step functions, one for each recognition factor, that need to be executed iteratively until convergence.</p><pre><code class="language-julia"># Generate variational update algorithms for each recognition factor
algo = variationalAlgorithm(q)
eval(Meta.parse(algo))
;</code></pre><pre><code class="language-julia">Meta.parse(algo) = quote
    #= none:3 =#
    function stepM!(data::Dict, marginals::Dict=Dict(), messages::Vector{Message}=Array{Message}(undef, 2))
        #= none:5 =#
        messages[1] = ruleVBGaussianMeanVarianceOut(nothing, ProbabilityDistribution(Univariate, PointMass, m=0), ProbabilityDistribution(Univariate, PointMass, m=10))
        #= none:6 =#
        messages[2] = ruleVBGaussianMeanPrecisionM(ProbabilityDistribution(Univariate, PointMass, m=data[:y]), nothing, marginals[:w])
        #= none:8 =#
        marginals[:m] = (messages[1]).dist * (messages[2]).dist
        #= none:10 =#
        return marginals
    end
    #= none:14 =#
    function stepW!(data::Dict, marginals::Dict=Dict(), messages::Vector{Message}=Array{Message}(undef, 2))
        #= none:16 =#
        messages[1] = ruleVBGammaOut(nothing, ProbabilityDistribution(Univariate, PointMass, m=0.1), ProbabilityDistribution(Univariate, PointMass, m=0.1))
        #= none:17 =#
        messages[2] = ruleVBGaussianMeanPrecisionW(ProbabilityDistribution(Univariate, PointMass, m=data[:y]), marginals[:m], nothing)
        #= none:19 =#
        marginals[:w] = (messages[1]).dist * (messages[2]).dist
        #= none:21 =#
        return marginals
    end
end</code></pre><h4><a class="nav-anchor" id="Computing-free-energy-1" href="#Computing-free-energy-1">Computing free energy</a></h4><p>VMP inference boils down to finding the member of a family of tractable probability distributions that is closest in KL divergence to an intractable posterior distribution. This is achieved by minimizing a quantity known as <em>free energy</em>. ForneyLab provides the function <code>freeEnergyAlgorithm</code> which generates an algorithm that can be used to evaluate this quantity. This function takes an object of type <code>RecognitionFactorization</code> as argument. Free energy is particularly useful to test for convergence of the VMP iterative procedure. Here is an example that generates, parses and evaluates this algorithm.</p><pre><code class="language-julia">fe_algorithm = freeEnergyAlgorithm(q)
eval(Meta.parse(fe_algorithm));</code></pre><h3><a class="nav-anchor" id="Expectation-maximization-1" href="#Expectation-maximization-1">Expectation maximization</a></h3><p>The expectation step of the expectation maximization (EM) algorithm can be executed by sum-product message passing, while the maximization step can be performed analytically or numerically. </p><pre><code class="language-julia">g = FactorGraph()
v = placeholder(:v) # parameter of interest
@RV m ~ GaussianMeanVariance(0.0, 1.0)
@RV y ~ GaussianMeanVariance(m, v)
placeholder(y, :y)
;</code></pre><p>Generating a sum-product algorithm towards a clamped variable signals ForneyLab that the user wishes to optimize this parameter. Next to returning a <code>step!()</code> function, ForneyLab will then provide mockup code for an <code>optimize!()</code> function as well.</p><pre><code class="language-julia">algo = sumProductAlgorithm(v)
;</code></pre><pre><code class="language-julia"># You have created an algorithm that requires updates for (a) clamped parameter(s).
# This algorithm requires the definition of a custom `optimize!` function that updates the parameter value(s)
# by altering the `data` dictionary in-place. The custom `optimize!` function may be based on the mockup below:

# function optimize!(data::Dict, marginals::Dict=Dict(), messages::Vector{Message}=init())
#   ...
#   return data
# end</code></pre><p>This <code>optimize!()</code> function accepts This function needs to be defined by the user and may optionally depend upon external tools. Note that <code>optimize!()</code> and <code>step!()</code> functions have the same calling signature. However, where a <code>step!()</code> function accepts the <code>data</code> and updates the <code>messages</code> and <code>marginals</code>, the <code>optimize!()</code> function operates vice-versa. Iterating these functions offers a general mechanism for implementing EM-type algorithms. See the demos for a detailed example.</p><h2><a class="nav-anchor" id="Executing-an-algorithm-1" href="#Executing-an-algorithm-1">Executing an algorithm</a></h2><p>In section <a href="#Specifying-a-model-1">Specifying a model</a> we introduced two main ways to learn from data, namely in an online and in an offline setting. We saw that the structure of the factor graph is different in each of these settings. In this section we will demonstrate how to feed data to an algorithm in both an online and an offline setting. We will use the same examples from section <a href="#Online-vs.-offline-learning-1">Online vs. offline learning</a>.</p><h3><a class="nav-anchor" id="Online-learning-1" href="#Online-learning-1">Online learning</a></h3><p>For convenience, let&#39;s reproduce the model specification for the problem of estimating the mean <code>x</code> of a Gaussian distributed random variable <code>y</code>, where <code>x</code> is modelled using another Gaussian distribution with hyperparameters <code>m</code> and <code>v</code>. Let&#39;s also generate a belief propagation algorithm for this inference problem like we have seen before.</p><pre><code class="language-julia">g = FactorGraph() # create a new factor graph
m = placeholder(:m)
v = placeholder(:v)
@RV x ~ GaussianMeanVariance(m, v)
@RV y ~ GaussianMeanVariance(x, 1.0)
placeholder(y, :y)
eval(Meta.parse(sumProductAlgorithm(x))) # generate, parse and evaluate the algorithm
;</code></pre><p>In order to execute this algorithm we first have to specify a prior for <code>x</code>. This is done by choosing some initial values for the hyperparameters <code>m</code> and <code>v</code>. In each processing step, the algorithm expects an observation and the current belief about <code>x</code>, i.e. the prior. We pass this information as elements of a <code>data</code> dictionary where the keys are the <code>id</code>s of their corresponding placeholders. The algorithm performs inference and returns the results inside a different dictionary (which we call <code>marginals</code> in the following script). In the next iteration, we repeat this process by feeding the algorithm with the next observation in the sequence and the posterior distribution of <code>x</code> that we obtained in the previous processing step. In other words, the current posterior becomes the prior for the next processing step. Let&#39;s illustrate this using an example where we will first generate a synthetic dataset by sampling observations from a Gaussian distribution that has a mean of 5.</p><pre><code class="language-julia">using Plots, LaTeXStrings; theme(:default) ;
pyplot(fillalpha=0.3, leg=false, xlabel=L&quot;x&quot;, ylabel=L&quot;p(x|D)&quot;, yticks=nothing)

N = 50                      # number of samples
dataset = randn(N) .+ 5     # sample N observations from a Gaussian with m=5 and v=1

normal(Œº, œÉ¬≤) = x -&gt; (1/(sqrt(2œÄ*œÉ¬≤))) * exp(-(x - Œº)^2 / (2*œÉ¬≤)) # to plot results

m_prior = 0.0   # initialize hyperparameter m
v_prior = 10    # initialize hyperparameter v

marginals = Dict()  # this is where the algorithm stores the results

anim = @animate for i in 1:N
    data = Dict(:y =&gt; dataset[i],
                :m =&gt; m_prior,
                :v =&gt; v_prior)

    plot(-10:0.01:10, normal(m_prior, v_prior), fill=true)

    step!(data, marginals) # feed in prior and data points 1 at a time

    global m_prior = mean(marginals[:x]) # today&#39;s posterior is tomorrow&#39;s prior
    global v_prior = var(marginals[:x])  # today&#39;s posterior is tomorrow&#39;s prior
end
;</code></pre><p><img src="../assets/belief-propagation-online.gif" alt="Online learning"/></p><p>As we process more samples, our belief about the possible values of <code>m</code> becomes more confident.</p><h3><a class="nav-anchor" id="Offline-learning-1" href="#Offline-learning-1">Offline learning</a></h3><p>Executing an algorithm in an offline fashion is much simpler than in the online case. Let&#39;s reproduce the model specification of the previous example in an offline setting (also shown in <a href="#Online-vs.-offline-learning-1">Online vs. offline learning</a>.)</p><pre><code class="language-julia">g = FactorGraph()   # create a new factor graph
N = 30              # number of observations
y = Vector{Variable}(undef, N)
@RV x ~ GaussianMeanVariance(0.0, 1.0)
for i = 1:N
    @RV y[i] ~ GaussianMeanVariance(x, 1.0)
    placeholder(y[i], :y, index=i)
end
eval(Meta.parse(sumProductAlgorithm(x))) # generate, parse and evaluate the algorithm
;</code></pre><p>Since we have a placeholder linked to each observation in the sequence, we can process the complete dataset in one step. To do so, we first need to create a dictionary having the complete dataset array as its single element. We then need to pass this dictionary to the <code>step!</code> function which, in contrast with the online counterpart, we only need to call once.</p><pre><code class="language-julia">data = Dict(:y =&gt; dataset)
marginals = step!(data) # Run the algorithm
plot(-10:0.01:10, normal(mean(marginals[:x]), var(marginals[:x])), fill=true)</code></pre><img src="data:image/png;base64,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umA2rgtm47pgNkVdF+edd16sW9denFbaDNa2bdviD/7gD8r4VQAApTt8zry0gPXrX/867r777ti8eXOsXbu2jF8JAFCaSipYAACrhSF3AICCCVgAAAXr6YD1kY98JDZv3hxZlsVPfvKTGV/72c9+Fpdddlmcc845cckll8QjjzxS0Smp2ubNm+O8886LrVu3xtatW+Nf/uVfqj4SFfP+wGy8VxAxd7Yo/H0j72E/+MEP8meffTY/44wz8l27ds342lve8pb8y1/+cp7neX7HHXfkl156aQUnpBfMdn2wunl/YDbeK8jzubNF0e8bPV1dMs8/AAADVklEQVTBuuKKK+I1r3nNUZ9/4YUX4sEHH5xa+3D11VfHk08+GU899VTJJwR6jfcHYD6zZYtuvG/0dMCay7PPPhunnnpq9Pe396RmWRann356PPPMMxWfjKpcc801sWXLlrj++uvjxRdfrPo4VMj7A/PxXsFsuvG+kWTAimj/L3+43LaJVWv79u2xc+fOePDBB+PEE0+M6667ruojUTHvD8zGewXzKfp9o6cC1te+9rWp4cMvf/nLc37faaedFr/4xS9iYmIiItp/Cc8++2ycfvrpZR2VCh15nXT+7z4wMBAf/ehH4z//8z8rPiFV8v7AXLxXMJduvG/0VMC69tprY8eOHbFjx474wAc+MOf3vfKVr4wLL7wwvv71r0dExJ133hmbN2+OzZs3l3RSqnT4dfLe97439u3bN/W1f/7nf44LL7ywwtNRNe8PzGZ4eNh7BXPqxvtGT29yv+mmm+Jb3/pWPP/883HSSSfF+vXr44knnoiIiMceeyze//73x969e2PDhg3x1a9+Nc4///yKT0zZdu/eHVdffXU0m83I8zxe+9rXxi233OIf01XO+wNH8l5Bx1zZouj3jZ4OWAAAKeqpFiEAwEogYAEAFEzAAgAomIAFAFAwAQsAoGACFgBAwQQsAICCCVgAAAUTsAAACiZgASvGfffdF1mWxTe+8Y2pz+3duzfOPvvs+O3f/u2pB7kCdJtH5QAryjvf+c7YvXt37Nq1K8bHx+Oqq66KQ4cOxfbt2+P444+v+njAKiFgASvKQw89FBdddFHcfvvt8a1vfSu2b98e9913X5x66qlVHw1YRQQsYMW5+uqr4zvf+U709/fHD3/4w9iyZUvVRwJWGTNYwIpz9tlnx8jISHz84x8XroBKqGABK8q2bdviuuuui61bt8ZLL70Ujz32WAwMDFR9LGCVUcECVowf/OAH8Yd/+Ifxuc99Lm6//fZ45pln4tZbb636WMAqpIIFrAiPPvpoXHbZZXHdddfF5z73uYiIuPbaa+N73/tePPHEEzE0NFTxCYHVRMACkvfCCy/EpZdeGq9//evjrrvuilqtXZx//PHH4zd+4zfis5/9bHzkIx+p+JTAaiJgAQAUzAwWAEDBBCwAgIIJWAAABROwAAAK9v8BVbgiQDSq14EAAAAASUVORK5CYII=" /><div class="admonition note"><div class="admonition-title">Note</div><div class="admonition-text"><p>Batch processing does not perform well with large datasets at the moment. We are working on this issue.</p></div></div><footer><hr/><a class="previous" href="../getting-started/"><span class="direction">Previous</span><span class="title">Getting started</span></a><a class="next" href="../library/user-api/"><span class="direction">Next</span><span class="title">User API</span></a></footer></article></body></html>
